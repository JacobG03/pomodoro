(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{11:function(e,t,s){e.exports={SettingsClosed:"NavbarMore_SettingsClosed__2ontx",active:"NavbarMore_active__nRBuP",SettingsOpen:"NavbarMore_SettingsOpen__H6QmO",Pomodoros:"NavbarMore_Pomodoros__1hJso",UserOpen:"NavbarMore_UserOpen__5Mvve",Logout:"NavbarMore_Logout__2gkge",ChangeUsername:"NavbarMore_ChangeUsername__2qnsB",ChangeAvatar:"NavbarMore_ChangeAvatar__fKDs8",EditIcon:"NavbarMore_EditIcon__21Av8",DeleteButton:"NavbarMore_DeleteButton__v2CTt"}},27:function(e,t,s){e.exports={pomodoro:"Session_pomodoro__-l0P3",main:"Session_main__3oBpl",top:"Session_top__1_vZE",fill:"Session_fill__1hVDT",session:"Session_session__wiB4Z",otherSessions:"Session_otherSessions__1yLiK"}},28:function(e,t,s){e.exports={Nav:"Navbar_Nav__28d77",content:"Navbar_content__1lFAQ",right:"Navbar_right__1crpm",avatar:"Navbar_avatar__Th0FH",active:"Navbar_active__2paTG",left:"Navbar_left__uJ093"}},33:function(e,t,s){e.exports={form:"RegisterForm_form__5_DRf",errors:"RegisterForm_errors__2GetZ"}},34:function(e,t,s){e.exports={otherSessions:"OtherSessions_otherSessions__245jb",session:"OtherSessions_session__2YE1p",top:"OtherSessions_top__2wvco",display:"OtherSessions_display__2ugh2",fill:"OtherSessions_fill__soX0I"}},44:function(e,t,s){e.exports={content:"RegisterPage_content__2zN4D",top:"RegisterPage_top__1PKtu",bottom:"RegisterPage_bottom__3Xwnx"}},45:function(e,t,s){e.exports={content:"LoginPage_content__gYvCk",top:"LoginPage_top__1W8ap",bottom:"LoginPage_bottom__10eUq"}},46:function(e,t,s){e.exports={form:"LoginForm_form__NKmXQ",errors:"LoginForm_errors__3Cf3w"}},48:function(e,t,s){e.exports={main:"UnAuthOther_main__34F8L",info:"UnAuthOther_info__4XxMy"}},59:function(e,t,s){e.exports={main:"HomePage_main__21Fa8"}},67:function(e,t,s){},68:function(e,t,s){},96:function(e,t,s){"use strict";s.r(t);var n=s(1),i=s.n(n),a=s(58),r=s.n(a),c=(s(67),s(3)),o=s(4),l=s(8),u=s(6),j=s(5),h=(s(68),s(13)),p=s(2),d=s(44),b=s.n(d),m=s(26),O=s(9),v=s(33),f=s.n(v),x=s(43),g=s(0);var _=function(e){var t=Object(x.a)(),n=t.register,i=t.handleSubmit,a=t.setError,r=t.formState.errors,c=s(38),o=Object(p.f)();return Object(g.jsxs)("form",{onSubmit:i((function(e){c.post("/auth/register",e).then((function(e){o("/login");var t=e.data.message;console.log(t)})).catch((function(e){console.log(e.response.data.errors);for(var t=e.response.data.errors,s=0,n=Object.entries(t);s<n.length;s++){var i=Object(O.a)(n[s],2),r=i[0],c=i[1];a(r,{message:c})}}))})),className:f.a.form,children:[Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Username:"}),Object(g.jsx)("input",Object(m.a)({},n("username",{required:!0}))),r.username&&Object(g.jsx)("span",{className:f.a.errors,children:r.username.message})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Email:"}),Object(g.jsx)("input",Object(m.a)({placeholder:"example@mail.com"},n("email",{required:!0}))),r.email&&Object(g.jsx)("span",{className:f.a.errors,children:r.email.message})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Password:"}),Object(g.jsx)("input",Object(m.a)({type:"password"},n("password",{required:!0}))),r.password&&Object(g.jsx)("span",{className:f.a.errors,children:r.password.message})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Repeat Password:"}),Object(g.jsx)("input",Object(m.a)({type:"password"},n("password2",{required:!0}))),r.password2&&Object(g.jsx)("span",{className:f.a.errors,children:r.password2.message})]})]}),Object(g.jsx)("button",{type:"submit",children:"Sign Up"})]})};var k=function(){return Object(g.jsx)("div",{className:"wrapper",children:Object(g.jsxs)("div",{className:b.a.content,children:[Object(g.jsxs)("div",{className:b.a.top,children:[Object(g.jsx)(h.b,{to:"/",children:Object(g.jsx)("h1",{children:"<Pomodoro>"})}),Object(g.jsx)("h2",{children:"Sign up"})]}),Object(g.jsx)(_,{}),Object(g.jsxs)("div",{className:b.a.bottom,children:[Object(g.jsx)("span",{children:"Are you already a user?"}),Object(g.jsx)(h.b,{to:"/login",children:"Sign in"})]})]})})},y=s(45),S=s.n(y),N=s(46),w=s.n(N);var C=function(e){var t=Object(x.a)(),n=t.register,i=t.handleSubmit,a=t.setError,r=t.formState.errors,c=s(38),o=Object(p.f)();return Object(g.jsxs)("form",{onSubmit:i((function(t){c.post("/auth/login",t).then((function(t){c.get("/auth").then((function(t){t.data.user&&(e.signIn(t.data.user),o("/"))}));var s=t.data.message;console.log(s)})).catch((function(e){for(var t=e.response.data.errors,s=0,n=Object.entries(t);s<n.length;s++){var i=Object(O.a)(n[s],2),r=i[0],c=i[1];a(r,{message:c})}}))})),className:w.a.form,children:[Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Email:"}),Object(g.jsx)("input",Object(m.a)({placeholder:"example@mail.com"},n("email",{required:!0}))),r.email&&Object(g.jsx)("span",{className:w.a.errors,children:r.email.message})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Password:"}),Object(g.jsx)("input",Object(m.a)({type:"password"},n("password",{required:!0}))),r.password&&Object(g.jsx)("span",{className:w.a.errors,children:r.password.message})]})]}),Object(g.jsx)("button",{type:"submit",children:"Sign In"})]})};var D=function(e){return Object(g.jsx)("div",{className:"wrapper",children:Object(g.jsxs)("div",{className:S.a.content,children:[Object(g.jsxs)("div",{className:S.a.top,children:[Object(g.jsx)(h.b,{to:"/",children:Object(g.jsx)("h1",{children:"<Pomodoro>"})}),Object(g.jsx)("h2",{children:"Sign in"})]}),Object(g.jsx)(C,{signIn:e.signIn}),Object(g.jsxs)("div",{className:S.a.bottom,children:[Object(g.jsx)("span",{children:"Are you a new user?"}),Object(g.jsx)(h.b,{to:"/register",children:"Register"})]})]})})},U=s(59),T=s.n(U),I=s(28),A=s.n(I),P=s(11),M=s.n(P),B=s(19),L=s(20),W=function(e){Object(u.a)(s,e);var t=Object(j.a)(s);function s(e){return Object(c.a)(this,s),t.call(this)}return Object(o.a)(s,[{key:"render",value:function(){var e=this;return Object(g.jsxs)("div",{className:M.a.UserOpen,children:[Object(g.jsx)(E,{updateUsername:this.props.updateUsername,user:this.props.user}),Object(g.jsx)(R,{user:this.props.user,updateAvatar:this.props.updateAvatar}),Object(g.jsx)("button",{className:M.a.Logout,onClick:function(){return e.props.signOut()},children:"Sign out"}),Object(g.jsx)(K,{signOut:this.props.signOut})]})}}]),s}(i.a.Component);function E(e){var t=Object(n.useState)(!1),s=Object(O.a)(t,2),i=s[0],a=s[1],r=Object(n.useRef)(null);Object(n.useEffect)((function(){i&&(r.current.value=e.user.username)}),[i,e.user.username]);return i?Object(g.jsxs)("div",{className:M.a.ChangeUsername,children:[Object(g.jsx)("input",{type:"text",ref:r}),Object(g.jsx)(B.a,{icon:L.a,onClick:function(){return function(t){var s={username:t};fetch("/settings/username",{method:"POST",body:JSON.stringify(s)}).then((function(s){return 200===s.status&&(e.updateUsername(t),a(!i)),s.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}(r.current.value)}}),Object(g.jsx)(B.a,{icon:L.d,onClick:function(){return a(!i)}})]}):Object(g.jsxs)("div",{className:M.a.ChangeUsername,children:[Object(g.jsx)("span",{children:e.user.username}),Object(g.jsx)(B.a,{className:M.a.EditIcon,icon:L.c,onClick:function(){return a(!i)}})]})}function R(e){var t=Object(n.useState)(!1),s=Object(O.a)(t,2),i=s[0],a=s[1],r=Object(n.useRef)(null);Object(n.useEffect)((function(){i&&(r.current.value=e.user.avatar)}),[i,e.user.avatar]);return i?Object(g.jsxs)("div",{className:M.a.ChangeAvatar,children:[Object(g.jsx)("input",{placeholder:'URL ending with ["png", "jpg", "gif"]',type:"text",ref:r}),Object(g.jsx)(B.a,{icon:L.a,onClick:function(){return function(t){var s={avatar:t};fetch("/settings/avatar",{method:"POST",body:JSON.stringify(s)}).then((function(s){return 200===s.status&&(e.updateAvatar(t),a(!i)),s.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}(r.current.value)}}),Object(g.jsx)(B.a,{icon:L.d,onClick:function(){return a(!i)}})]}):Object(g.jsxs)("div",{className:M.a.ChangeAvatar,children:[Object(g.jsx)("img",{src:e.user.avatar,alt:"User Avatar"}),Object(g.jsx)(B.a,{className:M.a.EditIcon,icon:L.c,onClick:function(){return a(!i)}})]})}var F=function(e){Object(u.a)(s,e);var t=Object(j.a)(s);function s(e){return Object(c.a)(this,s),t.call(this)}return Object(o.a)(s,[{key:"render",value:function(){var e=this;return Object(g.jsx)("div",{className:"".concat(M.a.SettingsClosed," ").concat(this.props.display?M.a.active:null),onClick:function(){return e.props.setDisplay((function(e){return!e}))},children:Object(g.jsx)(B.a,{icon:L.b})})}}]),s}(i.a.Component),q=function(e){Object(u.a)(s,e);var t=Object(j.a)(s);function s(e){return Object(c.a)(this,s),t.call(this)}return Object(o.a)(s,[{key:"render",value:function(){return Object(g.jsx)("div",{className:M.a.SettingsOpen,children:Object(g.jsx)(J,{settings:this.props.settings,setSettings:this.props.setSettings})})}}]),s}(i.a.Component);function J(e){var t=Object(n.useState)(!1),s=Object(O.a)(t,2),i=s[0],a=s[1],r=Object(n.useRef)(null),c=Object(n.useRef)(null),o=Object(n.useRef)(null),l=Object(n.useRef)(null);return Object(n.useEffect)((function(){i&&(r.current.value=e.settings.work_time,c.current.value=e.settings.break_time,o.current.value=e.settings.lbreak_time,l.current.value=e.settings.lbreak_interval)}),[e.settings,i]),i?Object(g.jsxs)("div",{className:M.a.Pomodoros,children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Work Time:"}),Object(g.jsx)("div",{children:Object(g.jsx)("input",{type:"text",ref:r})})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Break Time:"}),Object(g.jsx)("div",{children:Object(g.jsx)("input",{type:"text",ref:c})})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Longer Break Time:"}),Object(g.jsx)("div",{children:Object(g.jsx)("input",{type:"text",ref:o})})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Longer Break Time Interval:"}),Object(g.jsx)("div",{children:Object(g.jsx)("input",{type:"text",ref:l})})]}),Object(g.jsxs)("div",{className:M.a.Edit,children:[Object(g.jsx)("button",{onClick:function(){e.setSettings({work_time:r.current.value,break_time:c.current.value,lbreak_time:o.current.value,lbreak_interval:l.current.value}),a(!i)},children:"Save"}),Object(g.jsx)("button",{onClick:function(){return a(!i)},children:"Cancel"})]})]}):Object(g.jsxs)("div",{className:M.a.Pomodoros,children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Work Time:"}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:e.settings.work_time}),Object(g.jsx)(B.a,{icon:L.c,onClick:function(){return a(!i)}})]})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Break Time:"}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:e.settings.break_time}),Object(g.jsx)(B.a,{icon:L.c,onClick:function(){return a(!i)}})]})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Longer Break Time:"}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:e.settings.lbreak_time}),Object(g.jsx)(B.a,{icon:L.c,onClick:function(){return a(!i)}})]})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Longer Break Time Interval:"}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:e.settings.lbreak_interval}),Object(g.jsx)(B.a,{icon:L.c,onClick:function(){return a(!i)}})]})]})]})}function K(e){var t,s=Object(n.useState)(!1),i=Object(O.a)(s,2),a=i[0],r=i[1];return Object(n.useEffect)((function(){return function(){clearTimeout(t)}}),[t]),a?Object(g.jsx)("button",{className:M.a.DeleteButton,onClick:function(){fetch("/settings/delete").then((function(e){return e.json()})).then((function(t){console.log(t.message),e.signOut()}))},children:"Confirm"}):Object(g.jsx)("button",{className:M.a.DeleteButton,onClick:function(){t=setTimeout((function(){r(!1)}),3e3),r(!a)},children:"Delete Account"})}var X=function(e){var t=Object(n.useState)(!1),s=Object(O.a)(t,2),i=s[0],a=s[1],r=Object(n.useState)(!1),c=Object(O.a)(r,2),o=c[0],l=c[1];return Object(g.jsxs)("nav",{className:A.a.Nav,children:[Object(g.jsx)("div",{className:"wrapper",children:Object(g.jsxs)("div",{className:A.a.content,children:[Object(g.jsx)("div",{className:A.a.left,children:Object(g.jsx)(h.b,{to:"/",children:Object(g.jsx)("h1",{children:"<Pomodoro>"})})}),Object(g.jsx)("div",{className:A.a.right,children:e.user?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(F,{setSettings:e.setSettings,setDisplay:l,display:o}),Object(g.jsx)("div",{className:"".concat(A.a.avatar," ").concat(i?A.a.active:null),onClick:function(){return a(!i)},children:Object(g.jsx)("img",{src:e.user.avatar,alt:"".concat(e.user.username,"'s avatar")})})]}):Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(h.b,{to:"login",children:Object(g.jsx)("button",{children:"Sign In"})})})})]})}),i&&e.user?Object(g.jsx)("div",{className:"wrapper",children:Object(g.jsx)(W,{user:e.user,setDisplay:a,updateUsername:e.updateUsername,updateAvatar:e.updateAvatar,signOut:e.signOut})}):null,o&&e.user?Object(g.jsx)("div",{className:"wrapper",children:Object(g.jsx)(q,{settings:e.settings,setSettings:e.setSettings,setDisplay:l,user:e.user,signOut:e.signOut})}):null]})},H=s(27),Q=s.n(H),Z=s(32);function G(e){return Object(g.jsxs)("div",{className:Q.a.top,children:[Object(g.jsxs)("div",{onClick:function(){return e.setDisplay("work",!1)},children:[Object(g.jsx)("span",{style:{fontWeight:"work"===e.display?"700":"300"},children:"Work"}),e.time_left&&"work"===e.display?Object(g.jsx)("div",{className:Q.a.fill,style:{width:e.width}}):null]}),Object(g.jsxs)("div",{onClick:function(){return e.setDisplay("break",!1)},children:[Object(g.jsx)("span",{style:{fontWeight:"break"===e.display?"700":"300"},children:"Break"}),e.time_left&&"break"===e.display?Object(g.jsx)("div",{className:Q.a.fill,style:{width:e.width}}):null]}),Object(g.jsxs)("div",{onClick:function(){return e.setDisplay("lbreak",!1)},children:[Object(g.jsx)("span",{style:{fontWeight:"lbreak"===e.display?"700":"300"},children:"Longer Break"}),e.time_left&&"lbreak"===e.display?Object(g.jsx)("div",{className:Q.a.fill,style:{width:e.width}}):null]})]})}var Y=function(e){Object(u.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={time_left:n.props.time,timer:null,width:null},n.socket=Object(Z.a)("http://localhost:5000/"),n.scaleWidth.bind(Object(l.a)(n)),n.start.bind(Object(l.a)(n)),n.stop.bind(Object(l.a)(n)),n}return Object(o.a)(s,[{key:"componentDidMount",value:function(){this.socket.open()}},{key:"componentDidUpdate",value:function(e){if(e.display!==this.props.display){if(clearInterval(this.state.timer),this.props.user){var t=new Date;this.socket.emit("receive session",{time_left:this.props.time,active:!1,display:this.props.display,user:this.props.user,times:this.props.session.times,name:this.props.session.name,total_time:this.props.time,timestamp:t.getTime()/1e3})}this.setState({width:"100%",time_left:this.props.time,timer:null})}if(e.settings!==this.props.settings)return clearInterval(this.state.timer),void this.setState({time_left:this.props.time,width:"100%",timer:null})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timer),this.socket.close()}},{key:"scaleWidth",value:function(e,t,s,n,i){return"".concat((s-t)*(e-n)/(i-n)+t,"%")}},{key:"start",value:function(){var e=this;if(this.props.user){var t=new Date;this.socket.emit("receive session",{time_left:this.state.time_left,active:!0,display:this.props.display,user:this.props.user,times:this.props.session.times,name:this.props.session.name,total_time:this.props.time,timestamp:t.getTime()/1e3})}var s=setInterval((function(){e.state.time_left>0?e.setState({time_left:e.state.time_left-1,width:e.scaleWidth(e.state.time_left,0,100,0,e.props.time)}):(clearInterval(e.state.timer),"work"===e.props.display?e.props.session.times%e.props.settings.lbreak_interval?e.props.setDisplay("lbreak",!0):e.props.setDisplay("break",!0):e.props.setDisplay("work",!0))}),1e3);this.setState({timer:s})}},{key:"stop",value:function(){if(clearInterval(this.state.timer),this.props.user){var e=new Date;this.socket.emit("receive session",{time_left:this.state.time_left,active:!1,display:this.props.display,user:this.props.user,times:this.props.session.times,name:this.props.session.name,total_time:this.props.time,timestamp:e.getTime()/1e3})}this.setState({timer:null})}},{key:"formatTime",value:function(){var e=0,t=0;if(this.state.time_left>=60){for(var s=this.state.time_left;s>=60;s-=60)e+=1,t=s;t>=60&&(t-=60)}else e=0,t=this.state.time_left;var n=e.toString(),i=t.toString();return"".concat(1===n.length?"0":"").concat(e,":").concat(1===i.length?"0":"").concat(t)}},{key:"render",value:function(){var e=this;return Object(g.jsxs)("div",{className:Q.a.pomodoro,children:[Object(g.jsx)(G,{setDisplay:this.props.setDisplay,display:this.props.display,width:this.state.width,time_left:this.state.time_left}),Object(g.jsxs)("div",{className:Q.a.session,children:[Object(g.jsx)("h1",{children:this.props.session.name}),Object(g.jsx)("span",{children:this.formatTime()}),Object(g.jsxs)("h4",{children:["Times: ",this.props.session.times]}),this.state.timer?Object(g.jsx)("button",{onClick:function(){return e.stop()},children:"Stop"}):Object(g.jsx)("button",{onClick:function(){return e.start()},children:"Start"})]}),Object(g.jsx)("div",{className:Q.a.otherSessions,children:Object(g.jsx)("h1",{children:"Other Sessions"})})]})}}]),s}(i.a.Component),z=s(34),V=s.n(z),$=function(e){Object(u.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={sessions:[]},n.socket=Object(Z.a)("http://localhost:5000/"),n}return Object(o.a)(s,[{key:"componentDidMount",value:function(){this.socket.open(),this.connectSockets(),this.socket.emit("delete session",{id:this.props.user.id}),this.socket.emit("req all sessions")}},{key:"componentWillUnmount",value:function(){this.socket.emit("delete session",{id:this.props.user.id}),this.socket.removeAllListeners(),this.socket.close()}},{key:"connectSockets",value:function(){var e=this;this.socket.on("sync sessions",(function(t){e.setState({sessions:t})})),this.socket.on("add sessions",(function(t){e.setState({sessions:t})}))}},{key:"render",value:function(){var e=this;return Object(g.jsx)("div",{className:V.a.otherSessions,children:this.state.sessions.map((function(t){return Object(g.jsx)(ee,{user:e.props.user,session:t},t.user.id)}))})}}]),s}(i.a.Component),ee=function(e){Object(u.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={time_left:null,timer:null,width:n.props.session.width,active:n.props.session.active},n.updateTime.bind(Object(l.a)(n)),n}return Object(o.a)(s,[{key:"componentDidMount",value:function(){this.updateTime(),this.props.session.active&&this.start()}},{key:"componentDidUpdate",value:function(e){e.session.time_left!==this.props.session.time_left&&this.updateTime(),e.session.active!==this.props.session.active&&(this.props.session.active?this.props.session.active&&this.start():this.stop(),this.setState({active:this.props.session.active}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timer)}},{key:"scaleWidth",value:function(e,t,s,n,i){return"".concat((s-t)*(e-n)/(i-n)+t,"%")}},{key:"start",value:function(){var e=this,t=setInterval((function(){e.state.time_left>0&&e.setState({time_left:e.state.time_left-1,width:e.scaleWidth(e.state.time_left,0,100,0,e.props.session.total_time)})}),1e3);this.setState({timer:t})}},{key:"stop",value:function(){clearInterval(this.state.timer),this.setState({timer:null})}},{key:"updateTime",value:function(){var e=new Date,t=Math.abs(this.props.session.timestamp-e.getTime()/1e3);this.setState({time_left:(this.props.session.time_left-t).toFixed()})}},{key:"formatTime",value:function(){var e=0,t=0;if(this.state.time_left>=60){for(var s=this.state.time_left;s>=60;s-=60)e+=1,t=s;t>=60&&(t-=60)}else e=0,t=this.state.time_left;var n=e.toString(),i=t.toString();return"".concat(1===n.length?"0":"").concat(e,":").concat(1===i.length?"0":"").concat(t)}},{key:"render",value:function(){return this.state.time_left&&this.props.user.id!==this.props.session.user.id?Object(g.jsxs)("div",{className:V.a.session,children:[Object(g.jsxs)("div",{className:V.a.top,children:[Object(g.jsx)("img",{src:this.props.session.user.avatar,alt:"User Profile"}),Object(g.jsx)("span",{children:this.props.session.user.username})]}),Object(g.jsxs)("div",{className:V.a.display,children:[Object(g.jsx)("span",{children:this.props.session.active?this.props.session.name:"Paused"}),Object(g.jsx)("div",{className:V.a.fill,style:{width:this.props.session.active?this.state.width:"0%"}})]}),Object(g.jsx)("span",{children:this.formatTime()})]}):null}}]),s}(i.a.Component),te=$,se=s(48),ne=s.n(se),ie=function(e){Object(u.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={active:"..."},n.socket=Object(Z.a)("http://localhost:5000/"),n}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.socket.open(),this.socket.on("update active",(function(t){e.setState({active:t.amount})})),this.socket.emit("get active")}},{key:"componentWillUnmount",value:function(){this.socket.close()}},{key:"render",value:function(){return Object(g.jsxs)("div",{className:ne.a.main,children:[Object(g.jsx)("span",{children:"Do you want to see & share sessions?"}),Object(g.jsx)(h.b,{to:"/login",children:"Sign in"}),Object(g.jsxs)("div",{className:ne.a.info,children:[Object(g.jsx)("span",{children:"Active Sessions:"}),Object(g.jsx)("h1",{children:this.state.active})]})]})}}]),s}(i.a.Component),ae=function(e){Object(u.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).setDisplay=function(e,t){var s=n.state.sessions;t&&(s[n.state.display].times=n.state.sessions[n.state.display].times+1),n.setState({display:e,sessions:s})},n.state={display:"work",sessions:{work:{name:"Work",times:0},break:{name:"Break",times:0},lbreak:{name:"Longer Break",times:0}}},n.setDisplay.bind(Object(l.a)(n)),n}return Object(o.a)(s,[{key:"render",value:function(){return Object(g.jsxs)("div",{className:"wrapper",children:[Object(g.jsx)(Y,{session:this.state.sessions[this.state.display],time:60*this.props.settings["".concat(this.state.display,"_time")],setDisplay:this.setDisplay,display:this.state.display,user:this.props.user,settings:this.props.settings}),this.props.user?Object(g.jsx)(te,{user:this.props.user}):Object(g.jsx)(ie,{})]})}}]),s}(i.a.Component),re=s(38),ce=function(e){Object(u.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).setSettings=function(e){n.setState({settings:e})},n.state={settings:null},n.setSettings.bind(Object(l.a)(n)),n}return Object(o.a)(s,[{key:"componentDidMount",value:function(){this.fetchSettings()}},{key:"componentDidUpdate",value:function(e){e.user!==this.props.user&&this.fetchSettings()}},{key:"fetchSettings",value:function(){var e=this;re.get("/settings/pomodoros").then((function(t){e.setState({settings:t.data.settings})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(X,{user:this.props.user,signOut:this.props.signOut,settings:this.state.settings,setSettings:this.setSettings,updateUsername:this.props.updateUsername,updateAvatar:this.props.updateAvatar}),Object(g.jsx)("div",{className:T.a.main,children:this.state.settings?Object(g.jsx)(ae,{settings:this.state.settings,user:this.props.user}):Object(g.jsx)("h1",{children:"No settings"})})]})}}]),s}(i.a.Component),oe=s(38),le=function(e){Object(u.a)(s,e);var t=Object(j.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).updateUsername=function(t){var s=e.state.user;s.username=t,e.setState({user:s})},e.updateAvatar=function(t){var s=e.state.user;s.avatar=t,e.setState({user:s})},e.signIn=function(t){e.setState({user:t})},e.signOut=function(){oe.get("/auth/logout").then((function(t){setTimeout((function(){e.setState({user:null})}),500),e.forceUpdate()}))},e.state={user:null},e.signOut.bind(Object(l.a)(e)),e.signIn.bind(Object(l.a)(e)),e.updateUsername.bind(Object(l.a)(e)),e.updateAvatar.bind(Object(l.a)(e)),e}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this;oe.get("/auth").then((function(t){e.setState({user:t.data.user})})).catch((function(e){console.log(e.response.data)}))}},{key:"render",value:function(){return Object(g.jsx)(h.a,{children:Object(g.jsxs)(p.c,{children:[Object(g.jsx)(p.a,{path:"/",element:Object(g.jsx)(ce,{user:this.state.user,signOut:this.signOut,updateUsername:this.updateUsername,updateAvatar:this.updateAvatar})}),Object(g.jsx)(p.a,{path:"/login",element:Object(g.jsx)(D,{signIn:this.signIn})}),Object(g.jsx)(p.a,{path:"/register",element:Object(g.jsx)(k,{})})]})})}}]),s}(i.a.Component);r.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(le,{})}),document.getElementById("root"))}},[[96,1,2]]]);
//# sourceMappingURL=main.579f53b7.chunk.js.map